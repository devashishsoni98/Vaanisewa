<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VaaniSewa - Voice Accessibility App</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="admin-styles.css">
    <link rel="stylesheet" href="user-styles.css">
    <link rel="stylesheet" href="onboarding-styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <h1 class="logo">
                <i class="fas fa-microphone-alt" aria-hidden="true"></i>
                VaaniSewa
            </h1>
            <div class="header-controls">
                <button id="languageToggle" class="btn btn-secondary" aria-label="Toggle Language">
                    <i class="fas fa-language" aria-hidden="true"></i>
                    <span id="currentLang">EN</span>
                </button>
                <div class="volume-control">
                    <button id="volumeDown" class="btn btn-icon" aria-label="Volume Down">
                        <i class="fas fa-volume-down" aria-hidden="true"></i>
                    </button>
                    <div class="volume-indicator">
                        <div id="volumeBar" class="volume-bar"></div>
                    </div>
                    <button id="volumeUp" class="btn btn-icon" aria-label="Volume Up">
                        <i class="fas fa-volume-up" aria-hidden="true"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Status Bar -->
    <div class="status-bar">
        <div class="status-content">
            <div class="listening-status">
                <i id="micIcon" class="fas fa-microphone-slash" aria-hidden="true"></i>
                <span id="statusText">Click to start listening</span>
            </div>
            <div class="voice-commands-hint">
                <span id="commandsHint">Say: "register user", "login", "home", "settings", "help"</span>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Welcome Screen -->
        <div id="welcomeScreen" class="screen active">
            <div class="welcome-content">
                <div class="welcome-icon">
                    <i class="fas fa-universal-access" aria-hidden="true"></i>
                </div>
                <h2 id="welcomeTitle">Welcome to VaaniSewa</h2>
                <p id="welcomeSubtitle">Voice-powered accessibility for everyone</p>
                
                <div class="action-buttons">
                    <button id="registerBtn" class="btn btn-primary btn-large">
                        <i class="fas fa-user-plus" aria-hidden="true"></i>
                        <span id="registerBtnText">Register</span>
                    </button>
                    <button id="loginBtn" class="btn btn-secondary btn-large">
                        <i class="fas fa-sign-in-alt" aria-hidden="true"></i>
                        <span id="loginBtnText">Login</span>
                    </button>
                </div>

                <div class="voice-commands">
                    <p id="voiceCommandsText">Voice Commands:</p>
                    <ul id="voiceCommandsList">
                        <li>"register user" - Start registration</li>
                        <li>"login" - Start login process</li>
                        <li>"help" - Get assistance</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Registration Screen -->
        <div id="registrationScreen" class="screen">
            <div class="form-container">
                <h2 id="registrationTitle">Voice Registration</h2>
                <form id="registrationForm" class="voice-form">
                    <div class="form-group">
                        <label for="regUsername" id="regUsernameLabel">Username:</label>
                        <div class="input-with-mic">
                            <input type="text" id="regUsername" name="username" required aria-describedby="regUsernameHelp">
                            <button type="button" class="mic-btn" data-field="username" aria-label="Voice input for username">
                                <i class="fas fa-microphone" aria-hidden="true"></i>
                            </button>
                        </div>
                        <small id="regUsernameHelp" class="help-text">Say your username or type it</small>
                    </div>

                    <div class="form-group">
                        <label for="regEmail" id="regEmailLabel">Email:</label>
                        <div class="input-with-mic">
                            <input type="email" id="regEmail" name="email" required aria-describedby="regEmailHelp">
                            <button type="button" class="mic-btn" data-field="email" aria-label="Voice input for email">
                                <i class="fas fa-microphone" aria-hidden="true"></i>
                            </button>
                        </div>
                        <small id="regEmailHelp" class="help-text">Say your email address</small>
                    </div>

                    <div class="form-group">
                        <label for="regDisability" id="regDisabilityLabel">Disability Type:</label>
                        <div class="input-with-mic">
                            <select id="regDisability" name="disability" required aria-describedby="regDisabilityHelp">
                                <option value="">Select disability type</option>
                                <option value="visual">Visual Impairment</option>
                                <option value="hearing">Hearing Impairment</option>
                                <option value="mobility">Mobility Impairment</option>
                                <option value="cognitive">Cognitive Impairment</option>
                                <option value="other">Other</option>
                            </select>
                            <button type="button" class="mic-btn" data-field="disability" aria-label="Voice input for disability type">
                                <i class="fas fa-microphone" aria-hidden="true"></i>
                            </button>
                        </div>
                        <small id="regDisabilityHelp" class="help-text">Say the type of disability</small>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-large">
                            <i class="fas fa-user-check" aria-hidden="true"></i>
                            <span id="submitRegText">Register</span>
                        </button>
                        <button type="button" id="cancelRegBtn" class="btn btn-secondary">
                            <i class="fas fa-times" aria-hidden="true"></i>
                            <span id="cancelRegText">Cancel</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Login Screen -->
        <div id="loginScreen" class="screen">
            <div class="form-container">
                <h2 id="loginTitle">Voice Login</h2>
                <form id="loginForm" class="voice-form">
                    <div class="form-group">
                        <label for="loginUsername" id="loginUsernameLabel">Username:</label>
                        <div class="input-with-mic">
                            <input type="text" id="loginUsername" name="username" required aria-describedby="loginUsernameHelp">
                            <button type="button" class="mic-btn" data-field="loginUsername" aria-label="Voice input for username">
                                <i class="fas fa-microphone" aria-hidden="true"></i>
                            </button>
                        </div>
                        <small id="loginUsernameHelp" class="help-text">Say your username</small>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-large">
                            <i class="fas fa-sign-in-alt" aria-hidden="true"></i>
                            <span id="submitLoginText">Login</span>
                        </button>
                        <button type="button" id="cancelLoginBtn" class="btn btn-secondary">
                            <i class="fas fa-times" aria-hidden="true"></i>
                            <span id="cancelLoginText">Cancel</span>
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Dashboard Screen -->
        <div id="dashboardScreen" class="screen">
            <div class="dashboard-content">
                <h2 id="dashboardTitle">Dashboard</h2>
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user-circle" aria-hidden="true"></i>
                    </div>
                    <div class="user-details">
                        <h3 id="userWelcome">Welcome back!</h3>
                        <p id="userInfo">User information will appear here</p>
                    </div>
                </div>

                <div class="dashboard-actions">
                    <button id="settingsBtn" class="btn btn-primary btn-large">
                        <i class="fas fa-cog" aria-hidden="true"></i>
                        <span id="settingsBtnText">Settings</span>
                    </button>
                    <button id="helpBtn" class="btn btn-secondary btn-large">
                        <i class="fas fa-question-circle" aria-hidden="true"></i>
                        <span id="helpBtnText">Help</span>
                    </button>
                    <button id="logoutBtn" class="btn btn-danger btn-large">
                        <i class="fas fa-sign-out-alt" aria-hidden="true"></i>
                        <span id="logoutBtnText">Logout</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Settings Screen -->
        <div id="settingsScreen" class="screen">
            <div class="settings-content">
                <h2 id="settingsTitle">Settings</h2>
                
                <div class="settings-group">
                    <h3 id="voiceSettingsTitle">Voice Settings</h3>
                    
                    <div class="setting-item">
                        <label for="speechRate" id="speechRateLabel">Speech Rate:</label>
                        <input type="range" id="speechRate" min="0.5" max="2" step="0.1" value="1">
                        <span id="speechRateValue">1.0</span>
                    </div>

                    <div class="setting-item">
                        <label for="speechPitch" id="speechPitchLabel">Speech Pitch:</label>
                        <input type="range" id="speechPitch" min="0" max="2" step="0.1" value="1">
                        <span id="speechPitchValue">1.0</span>
                    </div>

                    <div class="setting-item">
                        <label for="voiceSelect" id="voiceSelectLabel">Voice:</label>
                        <select id="voiceSelect">
                            <option value="">Default Voice</option>
                        </select>
                    </div>
                </div>

                <div class="settings-actions">
                    <button id="testVoiceBtn" class="btn btn-secondary">
                        <i class="fas fa-play" aria-hidden="true"></i>
                        <span id="testVoiceBtnText">Test Voice</span>
                    </button>
                    <button id="backToDashboardBtn" class="btn btn-primary">
                        <i class="fas fa-arrow-left" aria-hidden="true"></i>
                        <span id="backToDashboardText">Back to Dashboard</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Help Screen -->
        <div id="helpScreen" class="screen">
            <div class="help-content">
                <h2 id="helpTitle">Help & Voice Commands</h2>
                
                <div class="help-section">
                    <h3 id="navigationCommandsTitle">Navigation Commands</h3>
                    <ul id="navigationCommandsList">
                        <li>"home" / "होम" - Go to dashboard</li>
                        <li>"settings" / "सेटिंग्स" - Open settings</li>
                        <li>"help" / "सहायता" - Show this help</li>
                        <li>"logout" / "लॉगआउट" - Sign out</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3 id="volumeCommandsTitle">Volume Commands</h3>
                    <ul id="volumeCommandsList">
                        <li>"volume up" / "आवाज़ बढ़ाएं" - Increase volume</li>
                        <li>"volume down" / "आवाज़ कम करें" - Decrease volume</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3 id="authCommandsTitle">Authentication Commands</h3>
                    <ul id="authCommandsList">
                        <li>"register user" / "उपयोगकर्ता पंजीकरण" - Start registration</li>
                        <li>"login" / "लॉगिन करें" - Start login</li>
                    </ul>
                </div>

                <div class="help-actions">
                    <button id="backFromHelpBtn" class="btn btn-primary">
                        <i class="fas fa-arrow-left" aria-hidden="true"></i>
                        <span id="backFromHelpText">Back</span>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p id="loadingText">Processing voice command...</p>
        </div>
    </div>

    <!-- Audio Feedback -->
    <audio id="successSound" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT" type="audio/wav">
    </audio>

    <script>
        // Load scripts in correct order
        const scripts = [
            'src/security.js',
            'src/auth.js',
            'src/data-manager.js',
            'src/contextual-help.js',
            'src/onboarding-wizard.js',
            'src/admin-dashboard.js',
            'src/user-dashboard.js',
            'src/main.js'
        ];
        
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = resolve;
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }
        
        // Load scripts sequentially
        async function loadAllScripts() {
            for (const src of scripts) {
                try {
                    await loadScript(src);
                } catch (error) {
                    console.warn(`Failed to load ${src}:`, error);
                }
            }
        }
        
        // Load scripts after DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', loadAllScripts);
        } else {
            loadAllScripts();
        }
    </script>
</body>
</html>